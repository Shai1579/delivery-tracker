(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{111:function(t,e,n){},112:function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(0),c=n(51),a=n.n(c),i=n(55),s=n(1),u=n(13),l=n(52),d=n.n(l),f=function(){var t;return{setup:function(){t=d()("")},on:function(e,n){t.on(e,n)},off:function(e,n){t.off(e,n)},emit:function(e,n){t.emit(e,n)},terminate:function(){t=null}}}();function h(){var t=Object(s.f)().id,e=Object(o.useState)(null),n=Object(u.a)(e,2),c=n[0],a=n[1],i=Object(o.useState)(null),l=Object(u.a)(i,2),d=l[0],h=l[1];return Object(o.useEffect)((function(){var e;return null===(e=navigator.geolocation)||void 0===e||e.getCurrentPosition((function(t){var e=t.coords,n="".concat(e.latitude,"/").concat(e.longitude);h(n)})),f.setup(),f.emit("register customer",t),f.on("new coords",(function(t){a(t)})),function(){f.off("new coords"),f.terminate()}}),[t]),Object(r.jsxs)("main",{className:"delivery-display",children:[Object(r.jsx)("h1",{children:"display!!"}),Object(r.jsx)("pre",{children:JSON.stringify(c)}),c&&Object(r.jsx)("iframe",{width:"450",height:"250",frameorder:"0",style:{border:0},src:"https://www.google.com/maps/embed/v1/directions\n                ?key=AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk\n                &origin=".concat(d,"\n                &destination=").concat(c.lat,"/").concat(c.lng,"\n                &avoid=tolls|highways"),allowFullScreen:!0})]})}window.socketService=f;var p=n(8),v=n.n(p),b=n(12),j=n(54),g="/api/",m=n.n(j).a.create({withCredentials:!0}),w=function(t,e){return O(t,"POST",e)};function O(t){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(v.a.mark((function t(e){var n,r,o,c=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",r=c.length>2&&void 0!==c[2]?c[2]:null,t.prev=2,t.next=5,m({url:"".concat(g).concat(e),method:n,data:r});case 5:return o=t.sent,t.abrupt("return",o.data);case 9:throw t.prev=9,t.t0=t.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(r)),console.dir(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}var x={setCoords:function(t){return k.apply(this,arguments)}};function k(){return(k=Object(b.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w("coord",{coords:e});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function S(){var t=Object(s.f)().strIds,e=Object(o.useState)(!1),n=Object(u.a)(e,2),c=n[0],a=n[1],i=Object(o.useState)(null),l=Object(u.a)(i,2),d=l[0],h=l[1];Object(o.useEffect)((function(){f.setup();var e=null===t||void 0===t?void 0:t.split(",");return f.emit("register deliverer",e),function(){j(),f.terminate()}}),[t]);var p=function(){var t=Object(b.a)(v.a.mark((function t(e){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords,t.prev=1,t.next=4,x.setCoords({lat:n.latitude,lng:n.longitude});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),j();case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}();function j(){console.log(d),clearInterval(d)}return Object(r.jsxs)("main",{className:"delivery-track",children:[Object(r.jsx)("h1",{children:"Hi there delivery-men"}),Object(r.jsxs)("h3",{children:["Your location ",c?"is shared now":"is not shared yet"]}),Object(r.jsxs)("button",{onClick:function(){if(c)j();else if(navigator.geolocation){var t=setInterval((function(){navigator.geolocation.getCurrentPosition(p,(function(t){j(),alert("please enable location in your setting")}))}),5e3);h(t)}else alert("Geolocation is not supported by this browser.");a(!c)},children:[c?"stop":"start"," sharing"]})]})}function C(){return Object(r.jsx)("div",{className:"app",children:Object(r.jsx)(i.a,{children:Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{path:"/track/:strIds",component:S}),Object(r.jsx)(s.a,{path:"/display/:id",component:h})]})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(111);var I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,113)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),r(t),o(t),c(t),a(t)}))};a.a.render(Object(r.jsx)(C,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),I()},86:function(t,e){}},[[112,1,2]]]);
//# sourceMappingURL=main.7e4c1b31.chunk.js.map