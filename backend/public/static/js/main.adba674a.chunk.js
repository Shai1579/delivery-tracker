(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{117:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(0),c=n(15),o=n.n(c),i=n(60),s=n(2),A=n(5),l=n.n(A),u=n(11),d=n(9),f=n(57),g=n.n(f),b=function(){var t;return{setup:function(){t=g()("")},on:function(e,n){t.on(e,n)},off:function(e,n){t.off(e,n)},emit:function(e,n){t.emit(e,n)},terminate:function(){t=null}}}();window.socketService=b;var h=n(25),j="AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk",m={width:"800px",height:"800px"};function v(t){var e=t.coords,n=Object(h.c)({id:"google-map-script",googleMapsApiKey:j}).isLoaded,c=Object(r.useState)(null),o=Object(d.a)(c,2),i=(o[0],o[1]),s=Object(r.useState)(null),A=Object(d.a)(s,2),l=A[0],u=A[1],f=Object(r.useState)(null),g=Object(d.a)(f,2),b=g[0],v=g[1];Object(r.useEffect)((function(){!l&&e&&n&&(u(e),v(16))}),[e]);var p=Object(r.useCallback)((function(t){var e=new window.google.maps.LatLngBounds;t.fitBounds(e),i(t)}),[]),O=Object(r.useCallback)((function(t){i(null)}),[]);return n?Object(a.jsxs)(h.a,{mapContainerStyle:m,center:l,zoom:b,onLoad:p,onUnmount:O,children:[Object(a.jsx)(h.b,{icon:"data:image/png;base64,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",position:e}),Object(a.jsx)(a.Fragment,{})]}):Object(a.jsx)(a.Fragment,{})}var p=Object(r.memo)(v),O=n(24),w=n.n(O),C="/api/",I=w.a.create({withCredentials:!0}),y=function(t,e){return E(t,"POST",e)};function E(t){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function t(e){var n,a,r,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",a=c.length>2&&void 0!==c[2]?c[2]:null,t.prev=2,t.next=5,I({url:"".concat(C).concat(e),method:n,data:a});case 5:return r=t.sent,t.abrupt("return",r.data);case 9:throw t.prev=9,t.t0=t.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}var k=w.a.create({withCredentials:!0}),x={setCoords:function(t){return J.apply(this,arguments)},getDirections:function(t,e){return S.apply(this,arguments)}};function J(){return(J=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y("coord",{coords:e});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}function S(){return(S=Object(u.a)(l.a.mark((function t(e,n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e.lat,"%2f").concat(e.lng),r="".concat(n.lat,"%2f").concat(n.lng),t.prev=2,t.next=5,k.get("https://maps.googleapis.com/maps/api/directions/json?origin=".concat(r,"&destination=").concat(a,"&key=").concat(j),{transformRequest:function(t,e){return delete e.common["Access-Control-Allow-Origin"],t}});case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),t.t0;case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function V(){var t=Object(s.f)(),e=t.id,n=t.lat,c=t.lng,o=Object(r.useState)(null),i=Object(d.a)(o,2),A=i[0],f=i[1],g=Object(r.useState)(null),h=Object(d.a)(g,2),j=h[0],m=h[1],v=Object(r.useState)(!1),O=Object(d.a)(v,2),w=O[0],C=O[1];return Object(r.useEffect)((function(){var t;return null===(t=navigator.geolocation)||void 0===t||t.getCurrentPosition((function(t){var e=t.coords,n="".concat(e.latitude,"%2f").concat(e.longitude);m(n),C(!0)})),b.setup(),b.emit("register customer",e),b.on("new coords",function(){var t=Object(u.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A){t.next=5;break}return t.next=3,x.getDirections({lat:n,lng:c},e);case 3:a=t.sent,console.log(a);case 5:f(e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),function(){b.off("new coords"),b.terminate()}}),[e]),Object(r.useEffect)((function(){if(j){var t=j.split("%2f"),e=Object(d.a)(t,2),n=e[0],a=e[1];console.log(Math.abs(A.lat-n),Math.abs(A.lng-a)),A&&Math.abs(A.lat-n)<.1&&Math.abs(A.lng-a)<.1&&C(!1)}}),[A]),Object(a.jsxs)("main",{className:"delivery-display",children:[Object(a.jsx)("h1",{children:"display!!"}),Object(a.jsx)("pre",{children:JSON.stringify(A)}),A&&(w?Object(a.jsx)("iframe",{width:"600",height:"450",style:{border:0},loading:"lazy",allowFullScreen:!0,src:"https://www.google.com/maps/embed/v1/directions?origin=31.8064792%2f35.1672849&destination=destination=harel+mall+mevasseret&key=AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk"}):Object(a.jsx)(p,{coords:A}))]})}var P=n(61),R=n(59);function T(){var t=Object(s.f)().strIds,e=Object(r.useState)(!1),n=Object(d.a)(e,2),c=n[0],o=n[1],i=Object(r.useState)(null),A=Object(d.a)(i,2),f=A[0],g=A[1],h=Object(r.useRef)(null);Object(r.useEffect)((function(){b.setup();var e=null===t||void 0===t?void 0:t.split(",");return b.emit("register deliverer",e),function(){clearInterval(h.current),b.terminate()}}),[t,f]);var j=function(){c?clearInterval(h.current):navigator.geolocation?h.current=setInterval((function(){navigator.geolocation.getCurrentPosition(m,(function(t){clearInterval(h.current),alert("please enable location in your setting")}))}),5e3):alert("Geolocation is not supported by this browser."),o(!c)},m=function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.coords,t.prev=1,t.next=4,x.setCoords({lat:n.latitude,lng:n.longitude});case 4:t.next=12;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("there has been an error"),clearInterval(h.current),o(!1),setTimeout((function(){g(Object(P.a)({},t.t0)),j()}),6e4);case 12:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("main",{className:"delivery-track",children:[Object(a.jsx)("h1",{children:"Hi there delivery-men"}),Object(a.jsx)(R.a,{children:function(t){var e=t.isOn,n=t.enable,c=t.disable;return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("h3",{children:["Your phone will ",e?"not":""," stay awake"]}),Object(a.jsx)("button",{onClick:e?c:n,children:e?"on":"off"})]})}}),Object(a.jsxs)("h3",{children:["Your location ",c?"is shared now":"is not shared yet"]}),Object(a.jsxs)("button",{onClick:j,children:[c?"stop":"start"," sharing"]})]})}function D(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(s.c,{children:[Object(a.jsx)(s.a,{path:"/track/:strIds",component:T}),Object(a.jsx)(s.a,{path:"/display/:id/:lat?/:lng?",component:V})]})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(117);var G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),c(t),o(t)}))};o.a.render(Object(a.jsx)(D,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),G()},93:function(t,e){}},[[118,1,2]]]);
//# sourceMappingURL=main.adba674a.chunk.js.map