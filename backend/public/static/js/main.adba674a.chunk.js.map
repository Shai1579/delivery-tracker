{"version":3,"sources":["services/socketService.js","config/config.js","cmps/Map.jsx","assets/img/motorbike.png","services/httpService.js","services/locationService.js","pages/DeliveryDisplay.jsx","pages/DeliveryTrack.jsx","App.jsx","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["socketService","socket","setup","io","on","eventName","cb","off","emit","data","terminate","createSocketService","window","GOOGLE_API_KEY","containerStyle","width","height","MyComponent","coords","isLoaded","useJsApiLoader","id","googleMapsApiKey","useState","setMap","center","setCenter","zoom","setZoom","useEffect","onLoad","useCallback","map","bounds","google","maps","LatLngBounds","fitBounds","onUnmount","mapContainerStyle","icon","position","Map","memo","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","ajax","a","method","url","res","console","log","dir","locationService","setCoords","getDirections","userPos","delivererPos","userPosStr","lat","lng","delivererPosStr","get","transformRequest","headers","common","DeliveryDisplay","useParams","userLocation","setUserLocation","isShowDir","setIsShowDir","navigator","geolocation","getCurrentPosition","location","latitude","longitude","newCoords","directions","split","userLat","userLng","Math","abs","className","JSON","stringify","style","border","loading","allowFullScreen","src","DeliveryTrack","strIds","isSharing","setIsSharing","socketErr","setSocketErr","intervalId","useRef","ids","clearInterval","current","onToggleShareLocation","setInterval","onNewPos","e","alert","setTimeout","isOn","enable","disable","onClick","App","path","component","Boolean","hostname","match","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"2NAGaA,EAKb,WACE,IAAIC,EAkBJ,MAjBsB,CACpBC,MADoB,WAElBD,EAASE,IAV0C,KAYrDC,GAJoB,SAIjBC,EAAWC,GACZL,EAAOG,GAAGC,EAAWC,IAEvBC,IAPoB,SAOhBF,EAAWC,GACbL,EAAOM,IAAIF,EAAWC,IAExBE,KAVoB,SAUfH,EAAWI,GACdR,EAAOO,KAAKH,EAAWI,IAEzBC,UAboB,WAclBT,EAAS,OArBcU,GAE7BC,OAAOZ,cAAgBA,E,YCLVa,EAAiB,0CCKxBC,EAAiB,CACnBC,MAAO,QACPC,OAAQ,SAIZ,SAASC,EAAT,GAAgC,IAAVC,EAAS,EAATA,OAEZC,EAAaC,YAAe,CAClCC,GAAI,oBACJC,iBAAkBT,IAFZM,SAFqB,EAOPI,mBAAS,MAPF,mBAOjBC,GAPiB,aAQDD,mBAAS,MARR,mBAQtBE,EARsB,KAQdC,EARc,OASLH,mBAAS,MATJ,mBAStBI,EATsB,KAShBC,EATgB,KAW7BC,qBAAU,YACDJ,GAAUP,GAAUC,IACrBO,EAAUR,GACVU,EAAQ,OAEb,CAACV,IAEJ,IAAMY,EAASC,uBAAY,SAAAC,GACzB,IAAMC,EAAS,IAAIrB,OAAOsB,OAAOC,KAAKC,aACtCJ,EAAIK,UAAUJ,GACdT,EAAOQ,KACN,IAEGM,EAAYP,uBAAY,SAAAC,GAC5BR,EAAO,QACN,IAEH,OAAQL,EACJ,eAAC,IAAD,CACEoB,kBAAmBzB,EACnBW,OAAQA,EACRE,KAAMA,EACNG,OAAQA,EACRQ,UAAWA,EALb,UAQE,cAAC,IAAD,CACFE,KCjDS,qmLDkDTC,SAAUvB,IAIR,gCAEF,6BAGC,IAAMwB,EAAMC,eAAK1B,G,iBEzDlB2B,EACA,QAIFC,EAAQC,IAAMC,OAAO,CACrBC,iBAAiB,IAGRC,EAAc,SAIlBC,EAAUzC,GACX,OAAO0C,EAAKD,EAAU,OAAQzC,I,SAUvB0C,E,8EAAf,WAAoBD,GAApB,+BAAAE,EAAA,6DAA8BC,EAA9B,+BAAuC,MAAO5C,EAA9C,+BAAqD,KAArD,kBAE0BoC,EAAM,CACpBS,IAAI,GAAD,OAAKV,GAAL,OAAgBM,GACnBG,SACA5C,SALZ,cAEc8C,EAFd,yBAOeA,EAAI9C,MAPnB,sCASQ+C,QAAQC,IAAR,qBAA0BJ,EAA1B,yCAAiEH,EAAjE,wBAAyFzC,IACzF+C,QAAQE,IAAR,MAVR,+D,sBCvBA,IAAMb,EAAQC,IAAMC,OAAO,CACvBC,iBAAiB,IAGRW,EAAkB,CAC3BC,U,4CACAC,c,2FAGJ,WAAyB3C,GAAzB,SAAAkC,EAAA,+EAEcH,EAAiB,QAAS,CAAE/B,WAF1C,0H,kEAOA,WAA6B4C,EAASC,GAAtC,iBAAAX,EAAA,6DACUY,EADV,UAC0BF,EAAQG,IADlC,cAC2CH,EAAQI,KACzCC,EAFV,UAE+BJ,EAAaE,IAF5C,cAEqDF,EAAaG,KAFlE,kBAIcrB,EAAMuB,IAAN,sEAAyED,EAAzE,wBAAwGH,EAAxG,gBAA0HnD,GAAkB,CAC9IwD,iBAAkB,SAAC5D,EAAM6D,GAErB,cADOA,EAAQC,OAAwB,+BAChC9D,KAPvB,4H,sBCbO,SAAS+D,IAAmB,IAAD,EACLC,cAAjBpD,EADsB,EACtBA,GAAI4C,EADkB,EAClBA,IAAKC,EADa,EACbA,IADa,EAEF3C,mBAAS,MAFP,mBAEvBL,EAFuB,KAEf0C,EAFe,OAGUrC,mBAAS,MAHnB,mBAGvBmD,EAHuB,KAGTC,EAHS,OAIIpD,oBAAS,GAJb,mBAIvBqD,EAJuB,KAIZC,EAJY,KAmC9B,OA7BAhD,qBAAU,WAAO,IAAD,EAgBZ,OAfA,UAAAiD,UAAUC,mBAAV,SAAuBC,oBAAmB,YAAiB,IAAd9D,EAAa,EAAbA,OACrC+D,EAAQ,UAAM/D,EAAOgE,SAAb,cAA2BhE,EAAOiE,WAC9CR,EAAgBM,GAChBJ,GAAa,MAEjB7E,EAAcE,QACdF,EAAcQ,KAAK,oBAAqBa,GACxCrB,EAAcI,GAAG,aAAjB,uCAA+B,WAAMgF,GAAN,eAAAhC,EAAA,yDACtBlC,EADsB,gCAEEyC,EAAgBE,cAAc,CAACI,MAAKC,OAAMkB,GAF5C,OAEjBC,EAFiB,OAGvB7B,QAAQC,IAAI4B,GAHW,OAK3BzB,EAAUwB,GALiB,2CAA/B,uDAQO,WACHpF,EAAcO,IAAI,cAClBP,EAAcU,eAEnB,CAACW,IAEJQ,qBAAU,WACN,GAAK6C,EAAL,CADY,MAEeA,EAAaY,MAAM,OAFlC,mBAELC,EAFK,KAEIC,EAFJ,KAGZhC,QAAQC,IAAIgC,KAAKC,IAAIxE,EAAO+C,IAAMsB,GAAUE,KAAKC,IAAIxE,EAAOgD,IAAMsB,IAC9DtE,GAAWuE,KAAKC,IAAIxE,EAAO+C,IAAMsB,GAAW,IAASE,KAAKC,IAAIxE,EAAOgD,IAAMsB,GAAW,IAAMX,GAAa,MAC/G,CAAC3D,IAGC,uBAAMyE,UAAU,mBAAhB,UACI,2CACA,8BAAMC,KAAKC,UAAU3E,KACpBA,IAAW0D,EACR,wBAAQ7D,MAAM,MAAMC,OAAO,MAAM8E,MAAO,CAACC,OAAQ,GAAIC,QAAQ,OAAOC,iBAAe,EAEnFC,IAAG,6KAEH,cAACxD,EAAD,CAAKxB,OAAQA,Q,oBC5CtB,SAASiF,IAAiB,IAErBC,EAAW3B,cAAX2B,OAFoB,EAGM7E,oBAAS,GAHf,mBAGrB8E,EAHqB,KAGVC,EAHU,OAIM/E,mBAAS,MAJf,mBAIrBgF,EAJqB,KAIVC,EAJU,KAKtBC,EAAaC,iBAAO,MAE1B7E,qBAAU,WACN7B,EAAcE,QACd,IAAMyG,EAAG,OAAGP,QAAH,IAAGA,OAAH,EAAGA,EAAQd,MAAM,KAE1B,OADAtF,EAAcQ,KAAK,qBAAsBmG,GAClC,WACHC,cAAcH,EAAWI,SACzB7G,EAAcU,eAEnB,CAAC0F,EAAQG,IAEZ,IAAMO,EAAwB,WACtBT,EAAWO,cAAcH,EAAWI,SAC9B/B,UAAUC,YAEhB0B,EAAWI,QAAUE,aAAY,WAC7BjC,UAAUC,YAAYC,mBAAmBgC,GAAU,SAACC,GAChDL,cAAcH,EAAWI,SACzBK,MAAM,+CAEX,KAP0BA,MAAM,iDAUvCZ,GAAcD,IAGZW,EAAQ,uCAAG,6BAAA5D,EAAA,6DAASlC,EAAT,EAASA,OAAT,kBAEHyC,EAAgBC,UAAU,CAAEK,IAAK/C,EAAOgE,SAAUhB,IAAKhD,EAAOiE,YAF3D,uDAKT3B,QAAQC,IAAI,2BACZmD,cAAcH,EAAWI,SACzBP,GAAa,GACba,YAAW,WACPX,EAAa,sBACbM,MACF,KAXO,yDAAH,sDAed,OACI,uBAAMnB,UAAU,iBAAhB,UACI,uDACA,cAAC,IAAD,UACK,gBAAGyB,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,QAAjB,OACG,eAAC,WAAD,WACI,kDAAqBF,EAAO,MAAQ,GAApC,iBACA,wBAAQG,QAASH,EAAOE,EAAUD,EAAlC,SACKD,EAAO,KAAO,cAK/B,gDAAmBf,EAAY,gBAAkB,uBACjD,yBAAQkB,QAAST,EAAjB,UAAyCT,EAAY,OAAS,QAA9D,iBC5DL,SAASmB,IACd,OACE,qBAAK7B,UAAU,MAAf,SACE,cAAC,IAAD,UACI,eAAC,IAAD,WACE,cAAC,IAAD,CAAO8B,KAAK,iBAAiBC,UAAWvB,IACxC,cAAC,IAAD,CAAOsB,KAAK,2BAA2BC,UAAWlD,WCD1CmD,QACW,cAA7B/G,OAAOqE,SAAS2C,UAEe,UAA7BhH,OAAOqE,SAAS2C,UAEhBhH,OAAOqE,SAAS2C,SAASC,MAAM,2D,WCLpBC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACL,cAAChB,EAAD,IACFiB,SAASC,eAAe,SFsHpB,kBAAmB5D,WACrBA,UAAU6D,cAAcC,MACrBX,MAAK,SAACY,GACLA,EAAaC,gBAEdC,OAAM,SAACC,GACNxF,QAAQwF,MAAMA,EAAMC,YEjH5BnB,K","file":"static/js/main.adba674a.chunk.js","sourcesContent":["import io from 'socket.io-client'\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n","export const GOOGLE_API_KEY = 'AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk'","import React, { memo, useCallback, useEffect, useState } from 'react'\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\nimport bikeIcon from '../assets/img/motorbike.png'\nimport {GOOGLE_API_KEY} from '../config/config.js'\n\nconst containerStyle = {\n    width: '800px',\n    height: '800px'\n};\n\n\nfunction MyComponent({coords}) {\n\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_API_KEY\n  })\n\n  const [map, setMap] = useState(null)\n  const [center, setCenter] = useState(null)\n  const [zoom, setZoom] = useState(null)\n\n  useEffect(() => {\n      if (!center && coords && isLoaded) {\n          setCenter(coords)\n          setZoom(16)\n        }\n  }, [coords])\n\n  const onLoad = useCallback(map => {\n    const bounds = new window.google.maps.LatLngBounds();\n    map.fitBounds(bounds);\n    setMap(map)\n  }, [])\n\n  const onUnmount = useCallback(map => {\n    setMap(null)\n  }, [])\n\n  return (isLoaded) ? (\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={center}\n        zoom={zoom}\n        onLoad={onLoad}\n        onUnmount={onUnmount}\n      >\n        { /* Child components, such as markers, info windows, etc. */ }\n        <Marker\n      icon={bikeIcon}\n      position={coords}\n    \n    />\n  \n        <></>\n      </GoogleMap>\n  ) : <></>\n}\n\nexport const Map = memo(MyComponent)","export default \"data:image/png;base64,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\"","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        throw err\r\n    }\r\n}","import Axios from 'axios'\nimport { GOOGLE_API_KEY } from '../config/config'\nimport { httpService } from './httpService'\nconst axios = Axios.create({\n    withCredentials: true\n})\n\nexport const locationService = {\n    setCoords,\n    getDirections,\n}\n\nasync function setCoords(coords) {\n    try {\n        await httpService.post('coord', { coords })\n    } catch (err) {\n        throw err\n    }\n}\nasync function getDirections(userPos, delivererPos) {\n    const userPosStr = `${userPos.lat}%2f${userPos.lng}`\n    const delivererPosStr = `${delivererPos.lat}%2f${delivererPos.lng}`\n    try {\n        await axios.get(`https://maps.googleapis.com/maps/api/directions/json?origin=${delivererPosStr}&destination=${userPosStr}&key=${GOOGLE_API_KEY}`, {\n            transformRequest: (data, headers) => {\n                delete headers.common['Authorization', 'Access-Control-Allow-Origin'];\n                return data;\n            }\n        })\n    } catch (err) {\n        throw err\n    }\n}","import { useEffect, useState } from \"react\"\nimport { useParams } from \"react-router\"\nimport { socketService } from \"../services/socketService\"\nimport { Map } from \"../cmps/Map\"\nimport { locationService } from \"../services/locationService\"\n \nexport function DeliveryDisplay() {\n    const { id, lat, lng } = useParams()\n    const [coords, setCoords] = useState(null)\n    const [userLocation, setUserLocation] = useState(null)\n    const [isShowDir, setIsShowDir] = useState(false)\n\n    useEffect(() => {\n        navigator.geolocation?.getCurrentPosition(({ coords }) => {\n            let location = `${coords.latitude}%2f${coords.longitude}`\n            setUserLocation(location)\n            setIsShowDir(true)\n        })\n        socketService.setup()\n        socketService.emit('register customer', id)\n        socketService.on('new coords', async(newCoords) => {\n            if (!coords){\n                const directions = await locationService.getDirections({lat, lng}, newCoords)\n                console.log(directions);\n            }\n            setCoords(newCoords)\n        })\n\n        return () => {\n            socketService.off('new coords')\n            socketService.terminate()\n        }\n    }, [id])\n\n    useEffect(() => {\n        if (!userLocation) return\n        const [userLat, userLng] = userLocation.split('%2f')\n        console.log(Math.abs(coords.lat - userLat), Math.abs(coords.lng - userLng));\n        if (coords && (Math.abs(coords.lat - userLat) < 0.1) && (Math.abs(coords.lng - userLng) < 0.1)) setIsShowDir(false)\n    },[coords])\n\n    return (\n        <main className=\"delivery-display\">\n            <h1>display!!</h1>\n            <pre>{JSON.stringify(coords)}</pre>\n            {coords && (isShowDir ? \n                <iframe width=\"600\" height=\"450\" style={{border: 0}} loading=\"lazy\" allowFullScreen \n                // src={`https://www.google.com/maps/embed/v1/directions?origin=${coords.lat}%2f${coords.lng}&destination=destination=${userLocation}&key=AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk`}></iframe>\n                src={`https://www.google.com/maps/embed/v1/directions?origin=31.8064792%2f35.1672849&destination=destination=harel+mall+mevasseret&key=AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk`}></iframe>\n                :\n                <Map coords={coords}/>)\n            }\n        </main>\n    )\n}","import { useEffect, useState, Fragment, useRef } from \"react\"\nimport { useParams } from \"react-router\"\nimport { socketService } from '../services/socketService'\nimport { locationService } from '../services/locationService'\nimport ReactNoSleep from 'react-no-sleep';\n\nexport function DeliveryTrack() {\n\n    const { strIds } = useParams()\n    const [isSharing, setIsSharing] = useState(false)\n    const [socketErr, setSocketErr] = useState(null)\n    const intervalId = useRef(null);\n\n    useEffect(() => {\n        socketService.setup()\n        const ids = strIds?.split(',')\n        socketService.emit('register deliverer', ids)\n        return () => {\n            clearInterval(intervalId.current)\n            socketService.terminate()\n        }\n    }, [strIds, socketErr])\n\n    const onToggleShareLocation = () => {\n        if (isSharing) clearInterval(intervalId.current)\n        else if (!navigator.geolocation) alert('Geolocation is not supported by this browser.')\n        else {\n            intervalId.current = setInterval(() => {\n                navigator.geolocation.getCurrentPosition(onNewPos, (e) => {\n                    clearInterval(intervalId.current)\n                    alert('please enable location in your setting')\n                });\n            }, 5000)\n            \n        }\n        setIsSharing(!isSharing)\n    }\n\n    const onNewPos = async ({ coords }) => {\n        try {\n            await locationService.setCoords({ lat: coords.latitude, lng: coords.longitude })\n        }\n        catch (err) {\n            console.log('there has been an error');\n            clearInterval(intervalId.current)\n            setIsSharing(false)\n            setTimeout(() => {\n                setSocketErr({...err})\n                onToggleShareLocation()\n            },60000)\n        }\n    }\n\n    return (\n        <main className=\"delivery-track\">\n            <h1>Hi there delivery-men</h1>\n            <ReactNoSleep>\n                {({ isOn, enable, disable }) => (\n                    <Fragment>\n                        <h3>Your phone will {isOn ? 'not' : ''} stay awake</h3>\n                        <button onClick={isOn ? disable : enable}>\n                            {isOn ? 'on' : 'off'}\n                        </button>\n                    </Fragment>\n                )}\n            </ReactNoSleep>\n            <h3>Your location {isSharing ? 'is shared now' : 'is not shared yet'}</h3>\n            <button onClick={onToggleShareLocation}>{isSharing ? 'stop' : 'start'} sharing</button>\n        </main>\n    )\n}","import React from 'react'\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom'\n\nimport { DeliveryDisplay } from './pages/DeliveryDisplay'\nimport { DeliveryTrack } from './pages/DeliveryTrack'\n\n\nexport function App() {\n  return (\n    <div className=\"app\">\n      <Router>\n          <Switch>\n            <Route path=\"/track/:strIds\" component={DeliveryTrack} />\n            <Route path=\"/display/:id/:lat?/:lng?\" component={DeliveryDisplay} />\n          </Switch>\n      </Router>\n    </div>\n  )\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport './assets/styles/main.scss'\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}