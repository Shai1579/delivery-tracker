{"version":3,"sources":["services/socketService.js","cmps/Map.jsx","config/config.js","assets/img/red-scooter.png","assets/img/red-home.png","cmps/CountDown.jsx","services/httpService.js","services/locationService.js","pages/DeliveryDisplay.jsx","cmps/Msg.jsx","assets/sounds/connection-eror.wav","pages/DeliveryTrack.jsx","App.jsx","serviceWorkerRegistration.js","reportWebVitals.js","index.js"],"names":["socketService","socket","setup","io","on","eventName","cb","off","emit","data","terminate","createSocketService","window","containerStyle","width","height","MyComponent","coords","userPos","isLoaded","useJsApiLoader","id","googleMapsApiKey","useState","count","setCount","setMap","center","setCenter","zoom","setZoom","useEffect","onLoad","useCallback","map","bounds","google","maps","LatLngBounds","fitBounds","onUnmount","mapContainerStyle","icon","position","Map","memo","CountDown","sec","isCounting","setIsCounting","getDirections","className","isPlaying","duration","colors","onComplete","remainingTime","Math","ceil","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","ajax","a","method","url","res","console","dir","locationService","setCoords","origin","destination","lat","lng","directions","DeliveryDisplay","useParams","astimatedTime","setDirections","timeLeft","setTimeLeft","onNewCoords","onSetDirections","newCoords","newDirections","routes","legs","endTime","Date","now","arrivalTime","value","Msg","msg","DeliveryTrack","audio","Audio","strIds","intervalId","useRef","isSharing","setIsSharing","setMsg","ids","split","clearInterval","current","getNewPos","navigator","geolocation","getCurrentPosition","onNewPos","e","alert","latitude","longitude","log","src","connectionErrorSound","setAttribute","play","isOn","enable","disable","onClick","setInterval","App","path","component","Boolean","location","hostname","match","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"2NAGaA,EAKb,WACE,IAAIC,EAkBJ,MAjBsB,CACpBC,MADoB,WAElBD,EAASE,IAV0C,KAYrDC,GAJoB,SAIjBC,EAAWC,GACZL,EAAOG,GAAGC,EAAWC,IAEvBC,IAPoB,SAOhBF,EAAWC,GACbL,EAAOM,IAAIF,EAAWC,IAExBE,KAVoB,SAUfH,EAAWI,GACdR,EAAOO,KAAKH,EAAWI,IAEzBC,UAboB,WAclBT,EAAS,OArBcU,GAE7BC,OAAOZ,cAAgBA,E,YCCjBa,EAAiB,CACrBC,MAAO,OACPC,OAAQ,QAIV,SAASC,EAAT,GAA2C,IAApBC,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,QAErBC,EAAaC,YAAe,CAClCC,GAAI,oBACJC,iBChB0B,4CDcpBH,SAFgC,EAOdI,mBAAS,GAPK,mBAOjCC,EAPiC,KAO1BC,EAP0B,OAQlBF,mBAAS,MARS,mBAQ5BG,GAR4B,aASZH,mBAAS,MATG,mBASjCI,EATiC,KASzBC,EATyB,OAUhBL,mBAAS,MAVO,mBAUjCM,EAViC,KAU3BC,EAV2B,KAYxCC,qBAAU,YACHJ,GAAUV,GAAUE,GACvBS,EAAUX,GACVa,EAAQ,KACCX,GAAYK,EAAQ,GAC7BI,EAAUX,GACVQ,EAAS,IACJA,EAASD,EAAQ,KACvB,CAACP,IAEJ,IAAMe,EAASC,uBAAY,SAAAC,GACzB,IAAMC,EAAS,IAAIvB,OAAOwB,OAAOC,KAAKC,aACtCJ,EAAIK,UAAUJ,GACdT,EAAOQ,KACN,IAEGM,EAAYP,uBAAY,SAAAC,GAC5BR,EAAO,QACN,IAEH,OAAQP,EACN,eAAC,IAAD,CACEsB,kBAAmB5B,EACnBc,OAAQA,EACRE,KAAMA,EACNG,OAAQA,EACRQ,UAAWA,EALb,UAOI,cAAC,IAAD,CACEE,KErDK,y+IFsDLC,SAAU1B,IAEVC,GACA,cAAC,IAAD,CACAwB,KG1DK,6wBH2DLC,SAAUzB,IAId,gCAEA,6BAGC,IAAM0B,EAAMC,eAAK7B,G,QInEjB,SAAS8B,EAAT,GAAqE,IAAjDC,EAAgD,EAAhDA,IAAKC,EAA2C,EAA3CA,WAAYC,EAA+B,EAA/BA,cAAeC,EAAgB,EAAhBA,cAkBvD,OACI,qBAAKC,UAAU,4BAAf,SACI,cAAC,uBAAD,CACIC,UAAWJ,EACXK,SAAUN,EACVO,OAAQ,CAAC,CAAC,SACVC,WAAY,kBAAMN,GAAc,IAJpC,SAnBW,SAAC,GAAuB,IAArBO,EAAoB,EAApBA,cAKlB,OAHIA,EAAgB,KAChBN,IAEkB,IAAlBM,EACO,qBAAKL,UAAU,QAAf,yBAIP,sBAAKA,UAAU,QAAf,UACI,qBAAKA,UAAU,QAAf,SAAwBM,KAAKC,KAAKF,EAAgB,MAClD,qBAAKL,UAAU,OAAf,8C,YCZVQ,EACA,QAIFC,E,OAAQC,EAAMC,OAAO,CACrBC,iBAAiB,IAGRC,EAAc,SACnBC,EAAUxD,GACV,OAAOyD,EAAKD,EAAU,MAAOxD,IAFxBuD,EAAc,SAIlBC,EAAUxD,GACX,OAAOyD,EAAKD,EAAU,OAAQxD,I,SAUvByD,E,8EAAf,WAAoBD,GAApB,+BAAAE,EAAA,6DAA8BC,EAA9B,+BAAuC,MAAO3D,EAA9C,+BAAqD,KAArD,kBAE0BmD,EAAM,CACpBS,IAAI,GAAD,OAAKV,GAAL,OAAgBM,GACnBG,SACA3D,SALZ,cAEc6D,EAFd,yBAOeA,EAAI7D,MAPnB,sCAUQ8D,QAAQC,IAAR,MAVR,+D,sBCxBO,IAAMC,EAAkB,CAC3BC,U,4CACAxB,c,2FAGJ,WAAyBjC,GAAzB,SAAAkD,EAAA,+EAEcH,EAAiB,QAAS,CAAE/C,WAF1C,0H,kEAOA,WAA6B0D,EAAQC,GAArC,eAAAT,EAAA,+EAEiCH,EAAA,qBAA8BW,EAAOE,IAArC,YAA4CF,EAAOG,IAAnD,YAA0DF,EAAYC,IAAtE,YAA6ED,EAAYE,MAF1H,cAEcC,EAFd,yBAGeA,GAHf,qG,sBCPO,SAASC,IAAmB,IAAD,EAEUC,cAAhC5D,EAFsB,EAEtBA,GAAIwD,EAFkB,EAElBA,IAAKC,EAFa,EAEbA,IAAKI,EAFQ,EAERA,cAFQ,EAIF3D,mBAAS,MAJP,mBAIvBN,EAJuB,KAIfyD,EAJe,OAKMnD,mBAAS,MALf,mBAKvBwD,EALuB,KAKXI,EALW,OAME5D,mBAAS,MANX,mBAMvB6D,EANuB,KAMbC,EANa,OAOM9D,oBAAS,GAPf,mBAOvByB,EAPuB,KAOXC,EAPW,KAS9BlB,qBAAU,WAIN,OAHA/B,EAAcE,QACdF,EAAcQ,KAAK,oBAAqBa,GACxCrB,EAAcI,GAAG,aAAckF,GACxB,WACHtF,EAAcO,IAAI,cAClBP,EAAcU,eAEnB,CAACW,IAEJU,qBAAU,YACDgD,GAAc9D,GAAQsE,EAAgBtE,KAC5C,CAACA,IAEJ,IAAMqE,EAAc,SAACE,GACjBd,EAAUc,IAGRD,EAAe,uCAAG,WAAOtE,GAAP,mBAAAkD,EAAA,0DAChBY,EADgB,iEAEQN,EAAgBvB,cAAc,CAAE2B,MAAKC,OAAO7D,GAFpD,OAEdwE,EAFc,OAGpBN,EAAcM,EAAcC,OAAO,GAAGC,KAAK,IACvCF,EAAcG,QAASP,EAAYI,EAAcG,QAAUC,KAAKC,QAE1DC,EAAcF,KAAKC,OAAL,UAAaL,EAAcC,OAAO,UAAlC,aAAa,EAAyBC,KAAK,GAAGtC,SAAS2C,OAC3EX,EAAYU,EAAcF,KAAKC,QAPf,2CAAH,sDAWrB,OACI,uBAAM3C,UAAU,mBAAhB,UACKlC,GAAU+B,GACP,qBAAKG,UAAU,gBAAf,SACI,cAACP,EAAD,CAAK3B,OAAQA,EAAQC,QAAS,CAAE2D,KAAMA,EAAKC,KAAMA,OAGxDC,GAAc/B,EACX,yBAASG,UAAU,mBAAnB,SACI,qBAAKA,UAAU,oBAAf,SACKiC,GAAY,cAACtC,EAAD,CAAWC,IAAMqC,EAAW,IAAOpC,WAAYA,EAAYC,cAAeA,EAAeC,cAAe,kBAAMqC,EAAgBtE,UAGjJA,GACF,sBAAKkC,UAAU,yBAAf,UACI,4DACA,sLACA,iFAGNlC,GACE,0BAASkC,UAAU,8BAAnB,UACI,gIACA,+HACC+B,GACD,uIAAyB,+BAAOA,OAEhC,mXACA,oNCzEb,SAASe,EAAT,GAAuB,IAARC,EAAO,EAAPA,IAClB,OACI,sBAAM/C,UAAU,kBAAhB,SACQ,qBAAKA,UAAU,MAAf,SACI,6BAAK+C,Q,YCJV,MAA0B,4CCQlC,SAASC,IACZ,IAAMC,EAAQ,IAAIC,MAEVC,EAAWrB,cAAXqB,OACFC,EAAaC,iBAAO,MAJE,EAMMjF,oBAAS,GANf,mBAMrBkF,EANqB,KAMVC,EANU,OAONnF,mBAAS,IAPH,mBAOrB2E,EAPqB,KAOhBS,EAPgB,KAU5B5E,qBAAU,WACN/B,EAAcE,QACd,IAAM0G,EAAG,OAAGN,QAAH,IAAGA,OAAH,EAAGA,EAAQO,MAAM,KAE1B,OADA7G,EAAcQ,KAAK,qBAAsBoG,GAClC,WACHE,cAAcP,EAAWQ,SACzB/G,EAAcU,eAEnB,CAAC4F,IAEJ,IAWMU,EAAY,WACdC,UAAUC,YAAYC,mBAAmBC,GAAU,SAACC,GAChDP,cAAcP,EAAWQ,SACzBO,MAAM,8CAIRF,EAAQ,uCAAG,6BAAAjD,EAAA,6DAASlD,EAAT,EAASA,OAAT,kBAEHwD,EAAgBC,UAAU,CAAEG,IAAK5D,EAAOsG,SAAUzC,IAAK7D,EAAOuG,YAF3D,uDAKTjD,QAAQkD,IAAI,2BACZX,cAAcP,EAAWQ,SACzBL,GAAa,GACbC,EAAO,oCACPP,EAAMsB,IAAMC,EACZvB,EAAMwB,aAAa,QAAQ,GAC3BxB,EAAMyB,OAXG,yDAAH,sDAed,OACI,uBAAM1E,UAAU,iCAAhB,UACK+C,GAAO,cAACD,EAAD,CAAKC,IAAKA,IAClB,uGACA,4KACA,iLACA,cAAC,IAAD,UACK,gBAAG4B,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,QAAjB,OACG,eAAC,WAAD,WACI,8EAAcF,EAAO,GAAK,eAA1B,wDACA,wBAAQG,QAASH,EAAOE,EAAUD,EAAQ5E,UAAW2E,EAAO,aAAe,WAA3E,SACKA,EAAO,6EAAmB,4DAK3C,0FAAgBrB,EAAY,gEAAgB,oEAC5C,yBAAQwB,QAlDc,WAC1B7B,EAAMyB,OACFpB,EAAWK,cAAcP,EAAWQ,SAC9BE,UAAUC,aAEhBF,IACAT,EAAWQ,QAAUmB,YAAYlB,EAAW,MAHfM,MAAM,iDAKvCZ,GAAcD,IA0C8BtD,UAAWsD,EAAY,aAAe,WAA9E,UAA2FA,EAAY,kCAAW,4BAAlH,wCCvEL,SAAS0B,IACd,OACE,qBAAKhF,UAAU,MAAf,SACE,cAAC,IAAD,UACI,eAAC,IAAD,WACE,cAAC,IAAD,CAAOiF,KAAK,iBAAiBC,UAAWlC,IACxC,cAAC,IAAD,CAAOiC,KAAK,2CAA2CC,UAAWrD,WCD1DsD,QACW,cAA7B1H,OAAO2H,SAASC,UAEe,UAA7B5H,OAAO2H,SAASC,UAEhB5H,OAAO2H,SAASC,SAASC,MAAM,2D,WCLpBC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACL,cAACjB,EAAD,IACFkB,SAASC,eAAe,SFsHpB,kBAAmBrC,WACrBA,UAAUsC,cAAcC,MACrBX,MAAK,SAACY,GACLA,EAAaC,gBAEdC,OAAM,SAACC,GACNrF,QAAQqF,MAAMA,EAAMC,YEjH5BnB,K","file":"static/js/main.e007652d.chunk.js","sourcesContent":["import io from 'socket.io-client'\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n","import React, { memo, useCallback, useEffect, useState } from 'react'\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\nimport bikeIcon from '../assets/img/red-scooter.png'\nimport hungryIcon from '../assets/img/red-home.png'\nimport { GOOGLE_API_KEY } from '../config/config.js'\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n\nfunction MyComponent({ coords, userPos }) {\n\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: GOOGLE_API_KEY\n  })\n\n  const [count, setCount] = useState(0)\n  const [map, setMap] = useState(null)\n  const [center, setCenter] = useState(null)\n  const [zoom, setZoom] = useState(null)\n\n  useEffect(() => {\n    if (!center && coords && isLoaded) {\n      setCenter(coords)\n      setZoom(16)\n    } else if (isLoaded && count > 4) {\n      setCenter(coords)\n      setCount(0)\n    } else setCount(count + 1)\n  }, [coords])\n\n  const onLoad = useCallback(map => {\n    const bounds = new window.google.maps.LatLngBounds();\n    map.fitBounds(bounds);\n    setMap(map)\n  }, [])\n\n  const onUnmount = useCallback(map => {\n    setMap(null)\n  }, [])\n\n  return (isLoaded) ? (\n    <GoogleMap\n      mapContainerStyle={containerStyle}\n      center={center}\n      zoom={zoom}\n      onLoad={onLoad}\n      onUnmount={onUnmount}\n    >\n        <Marker\n          icon={bikeIcon}\n          position={coords}\n        />\n        { userPos &&\n          <Marker\n          icon={hungryIcon}\n          position={userPos}\n          />\n        }\n\n      <></>\n    </GoogleMap>\n  ) : <></>\n}\n\nexport const Map = memo(MyComponent)","export const GOOGLE_API_KEY = 'AIzaSyD_RtSmY40CDJvjkyKGMbNuDLl29MwbZyk'","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB6UlEQVRYhe2WwUtUURTGf0+GCBmilYhIiwhRCRcSEu3dSEgLFy1atXDjTkTct2jXIoiW5qJVVPoXuHAhETFIEBJCRIhKuNBB3Dh8Ld658DjemXnvOYMEc+CDN/fc833n3fPdmYFeXHMkZQsFo8CCfXybwA+XnwWmXdmbBHbLambJHwtOBDLUTTC750MmHzDvufpKiC8BG8CtzHIV+CxYVlHCAsI3BKvujc4FZ25tzfbmOoG84gOCLUd2IHgoeCDYd7ktwWZHGhDcF/xyRDXBHcGoYFwwLPgaEbxaAxGzSemsq4IZy53Yvv4mx168AaVYEjQcwUtBn2DR5RqCFcu9iNTlb8AMtBYx2zPBzUgui/e256nVFGugjdkGBds55vxFMCSYiphzWzDQTHyihdkmBX9yiAfsK70dw4JvLvdbMBEzW72J2eZ0+a7nwZmNol/w0eXqgidB3BsqmK3SxlB5keXKrjcEy7gjCmarRrq+CjaM05tzB8FdwV+lZntkc6t1UDzgu1I/TZnWsWAkjOGeYMien3dBPGDeNAaDeAUggb22XxAdjAQOSVH857jTUbaB18CYw6syRJWSDRz5v1aCozJE/+0Ieg10tYGLLupd4o7dgnXgHXC7BdHPyNqe1TaLU+BTi3wvrif+AZWnhDz9ZBv7AAAAAElFTkSuQmCC\"","import {CountdownCircleTimer} from 'react-countdown-circle-timer'\nexport function CountDown({sec, isCounting, setIsCounting, getDirections}) {\n    const renderTime = ({ remainingTime }) => {\n\n        if (remainingTime < 120) {\n            getDirections()\n        }\n        if (remainingTime === 0) {\n            return <div className=\"timer\">Too lale...</div>\n        }\n\n        return (\n            <div className=\"timer\">\n                <div className=\"value\">{Math.ceil(remainingTime / 60)}</div>\n                <div className=\"text\">拽转</div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"timer-wrapper flex center\">\n            <CountdownCircleTimer\n                isPlaying={isCounting}\n                duration={sec}\n                colors={[[\"#fff\"]]}\n                onComplete={() => setIsCounting(false)}\n            >\n                {renderTime}\n            </CountdownCircleTimer>\n        </div>\n    )\n}","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        process.env.NODE_ENV === 'production' ? \r\n        console.dir(err)\r\n        :\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`) \r\n        throw err\r\n    }\r\n}","import { httpService } from './httpService'\n\nexport const locationService = {\n    setCoords,\n    getDirections\n}\n\nasync function setCoords(coords) {\n    try {\n        await httpService.post('coord', { coords })\n    } catch (err) {\n        throw err\n    }\n}\nasync function getDirections(origin, destination) {\n    try {\n        const directions = await httpService.get(`directions/${origin.lat},${origin.lng}/${destination.lat},${destination.lng}`)\n        return directions\n    } catch (err) {\n        throw err\n    }\n}\n\n\n","import { useEffect, useRef, useState } from \"react\"\nimport { useParams } from \"react-router\"\nimport { socketService } from \"../services/socketService\"\nimport { Map } from \"../cmps/Map\"\nimport { CountDown } from \"../cmps/CountDown\"\nimport { locationService } from \"../services/locationService\"\n\nexport function DeliveryDisplay() {\n\n    const { id, lat, lng, astimatedTime } = useParams()\n\n    const [coords, setCoords] = useState(null)\n    const [directions, setDirections] = useState(null)\n    const [timeLeft, setTimeLeft] = useState(null)\n    const [isCounting, setIsCounting] = useState(true)\n\n    useEffect(() => {\n        socketService.setup()\n        socketService.emit('register customer', id)\n        socketService.on('new coords', onNewCoords)\n        return () => {\n            socketService.off('new coords')\n            socketService.terminate()\n        }\n    }, [id])\n\n    useEffect(() => {\n        if (!directions && coords) onSetDirections(coords)\n    }, [coords])\n\n    const onNewCoords = (newCoords) => {\n        setCoords(newCoords)\n    }\n\n    const onSetDirections = async (coords) => {\n        if (directions) return\n        const newDirections = await locationService.getDirections({ lat, lng }, coords)\n        setDirections(newDirections.routes[0].legs[0])\n        if (newDirections.endTime) setTimeLeft(newDirections.endTime - Date.now())\n        else {\n            const arrivalTime = Date.now() + newDirections.routes[0]?.legs[0].duration.value\n            setTimeLeft(arrivalTime - Date.now())\n        }\n    }\n\n    return (\n        <main className=\"delivery-display\">\n            {coords && isCounting &&\n                <div className=\"map-container\">\n                    <Map coords={coords} userPos={{ lat: +lat, lng: +lng }} />\n                </div>\n            }\n            {directions && isCounting ?\n                <section className=\"matrix-container\">\n                    <div className=\"timer flex center\">\n                        {timeLeft && <CountDown sec={(timeLeft / 1000)} isCounting={isCounting} setIsCounting={setIsCounting} getDirections={() => onSetDirections(coords)} />}\n                    </div>\n                </section>\n                :coords && \n                <div className=\"finish flex col center\">\n                    <h2>转..</h2>\n                    <h2> 拽爪转 拽  注砖</h2>\n                    <h1>转!</h1>\n                </div>\n            }\n            {!coords &&\n                <section className=\"pre-display flex col center\">\n                    <h1> 祝 砖转 驻 コ</h1>\n                    <h3> 砖 !</h3>\n                    {astimatedTime && \n                    <h3>砖 注 注 砖注: <span>{astimatedTime}</span></h3>\n                    }\n                    <h4>专注 砖   转 专转 转 拽 砖 砖  注 驻!</h4>\n                    <h5>( 转,  注 砖转 专注..)</h5>\n                </section>\n            }\n        </main>\n    )\n}","export function Msg({ msg }) {\n    return (\n        <main className=\"msg flex center\">\n                <div className=\"txt\">\n                    <h3>{msg}</h3>\n                </div>\n        </main>\n    )\n}","export default __webpack_public_path__ + \"static/media/connection-eror.88943cf4.wav\";","import { useEffect, useState, Fragment, useRef } from \"react\"\nimport { useParams } from \"react-router\"\nimport { socketService } from '../services/socketService'\nimport { locationService } from '../services/locationService'\nimport { Msg } from '../cmps/Msg'\nimport ReactNoSleep from 'react-no-sleep';\nimport connectionErrorSound from '../assets/sounds/connection-eror.wav';\n\nexport function DeliveryTrack() {\n    const audio = new Audio();\n\n    const { strIds } = useParams()\n    const intervalId = useRef(null)\n\n    const [isSharing, setIsSharing] = useState(false)\n    const [msg, setMsg] = useState('')\n\n\n    useEffect(() => {\n        socketService.setup()\n        const ids = strIds?.split(',')\n        socketService.emit('register deliverer', ids)\n        return () => {\n            clearInterval(intervalId.current)\n            socketService.terminate()\n        }\n    }, [strIds])\n\n    const onToggleShareLocation = () => {\n        audio.play()\n        if (isSharing) clearInterval(intervalId.current)\n        else if (!navigator.geolocation) alert('Geolocation is not supported by this browser.')\n        else {\n            getNewPos()\n            intervalId.current = setInterval(getNewPos, 5000)\n        }\n        setIsSharing(!isSharing)\n    }\n\n    const getNewPos = () => {\n        navigator.geolocation.getCurrentPosition(onNewPos, (e) => {\n            clearInterval(intervalId.current)\n            alert('please enable location in your setting')\n        });\n    }\n\n    const onNewPos = async ({ coords }) => {\n        try {\n            await locationService.setCoords({ lat: coords.latitude, lng: coords.longitude })\n        }\n        catch (err) {\n            console.log('there has been an error');\n            clearInterval(intervalId.current)\n            setIsSharing(false)\n            setMsg('Lost connection, Please refresh!')\n            audio.src = connectionErrorSound\n            audio.setAttribute('loop', true)\n            audio.play()\n        }\n    }\n\n    return (\n        <main className=\"delivery-track flex col center\">\n            {msg && <Msg msg={msg}/>}\n            <h1>砖  砖.</h1>\n            <h3>转 砖转    !</h3>\n            <h3>转 转 注砖 注转 拽砖 </h3>\n            <ReactNoSleep>\n                {({ isOn, enable, disable }) => (\n                    <Fragment>\n                        <h3>住 砖 {isOn ? '' : ''} 砖专 拽</h3>\n                        <button onClick={isOn ? disable : enable} className={isOn ? 'deactivate' : 'activate'}>\n                            {isOn ? '  ' : '砖专 拽'}\n                        </button>\n                    </Fragment>\n                )}\n            </ReactNoSleep>\n            <h3>拽 砖 {isSharing ? '砖转祝 注砖' : '注  砖转祝'}</h3>\n            <button onClick={onToggleShareLocation} className={isSharing ? 'deactivate' : 'activate'}>{isSharing ? '住 ' : '转 '} 砖转祝</button>\n        </main>\n    )\n}","import React from 'react'\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom'\n\nimport { DeliveryDisplay } from './pages/DeliveryDisplay'\nimport { DeliveryTrack } from './pages/DeliveryTrack'\n\n\nexport function App() {\n  return (\n    <div className=\"app\">\n      <Router>\n          <Switch>\n            <Route path=\"/track/:strIds\" component={DeliveryTrack} />\n            <Route path=\"/display/:id/:lat?/:lng?/:astimatedTime?\" component={DeliveryDisplay} />\n          </Switch>\n      </Router>\n    </div>\n  )\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport './assets/styles/main.scss'\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}